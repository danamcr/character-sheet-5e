<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <title>Character Sheet. 5e.</title>
        <meta name="application-name" content="Character Sheet. 5e.">
        <meta name="description" content="Online character sheet for 5e D&amp;D.">

        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
        <link rel="manifest" href="/manifest.json">
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="apple-mobile-web-app-title" content="CharSheet5e">
        <meta name="theme-color" content="#ffffff">

        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div class="alertContainer">
            <div class="alert alert-unsaved" hidden>Unsaved changes... <button type="button" class="btn-save btn-sm">Save</button></div>
            <div class="alert alert-delete" hidden>
                <span>Deleting character... <button type="button" class="btn-delete-undo btn-sm" data-key="">Undo</button></span>
                <span class="delete-timeout"></span>
            </div>
        </div>
        <div id="alert-main" class="dialog" role="dialog" aria-labelledby="dialog-label" hidden></div>
        <div id="dialog-load" class="dialog" role="dialog"  aria-labelledby="dialog-label-load" hidden></div>
        <div id="dialog-backup" class="dialog" role="dialog"  aria-labelledby="dialog-label-backup" hidden></div>
        <div id="dialog-restore" class="dialog" role="dialog"  aria-labelledby="dialog-label-restore" hidden></div>
        <div id="dialog-delete" class="dialog" role="dialog"  aria-labelledby="dialog-label-delete" hidden></div>

        <div class="container">
            <div class="app-actions" roled="toolbar" aria-label="Character Actions">
                <button type="button" class="btn-save" data-action="save" tabindex="0">Save</button>
                <button type="button" class="btn-load btn-dialog" data-action="load" tabindex="-1">Load</button>
                <button type="button" class="btn-new-character" data-action="new" tabindex="-1">New</button>
                <button type="button" class="btn-backup btn-dialog" data-action="backup" tabindex="-1">Backup</button>
                <button type="button" class="btn-restore-backup btn-dialog" data-action="restore" tabindex="-1">Restore</button>
                <button type="button" class="btn-delete btn-dialog" data-action="delete" tabindex="-1">Delete</button>
            </div>
            <header id="page-top" class="page-header">
                <h1 class="pc-charname" data-name="charname" placeholder="Character Name" contenteditable="true" aria-label="Character Name"></h1>
                <div class="menu-open">
                    <button type="button" class="btn-open-actions">Menu</button>
                </div>
            </header>

            <main>
                <ul id="toptabs" role="tablist">
                    <li role="presentation"><a role="tab" id="tab-stats" href="#pane-stats" aria-selected="true">Statistics, Abilities, Equipment, etc.</a></li>
                    <li role="presentation"><a role="tab" id="tab-notes" href="#pane-notes" aria-selected="false">Notes, Personality, NPCs, etc.</a></li>
                </ul>

                <section id="pane-stats" class="grid" role="tabpanel" aria-labelledby="tab-stats">
                    <section class="fullwidth">
                        <dl class="field">
                            <div>
                                <dt>Class</dt><dd contenteditable="true" data-name="charclass"></dd>
                            </div>
                            <div>
                                <dt>Race</dt><dd contenteditable="true" data-name="race"></dd>
                            </div>
                            <div>
                                <dt>Background</dt><dd contenteditable="true" data-name="background"></dd>
                            </div>
                            <div>
                                <dt>Alignment</dt><dd contenteditable="true" class="large" data-name="alignment"></dd>
                            </div>
                            <div>
                                <dt>Level</dt><dd contenteditable="true" class="small" data-name="level"></dd>
                            </div>
                            <div>
                                <dt>Experience</dt><dd contenteditable="true" class="small" data-name="experience"></dd>
                            </div>
                            <div>
                                <dt>Proficiency Bonus</dt><dd class="small" data-name="proficiency"></dd>
                            </div>
                            <div>
                                <dt>Inspiration</dt><dd contenteditable="true" class="small" data-name="inspiration"></dd>
                            </div>
                            <div>
                                <dt>Speed</dt><dd contenteditable="true" class="small" data-name="speed"></dd>
                            </div>
                            <div>
                                <dt>Hit Dice</dt>
                                <dd>
                                    <span contenteditable="true" class="small" data-name="hd_cur" placeholder="1" aria-label="Current Hit Dice"></span> <strong>/</strong>
                                    <span contenteditable="true" class="small" data-name="hd_max" placeholder="1" aria-label="Maximum Hit Dice"></span>
                                </dd>
                            </div>
                            <div class="with_icon">
                                <dt>Armor Class</dt><dd contenteditable="true" class="small" data-name="armor_class" placeholder="10"></dd>
                            </div>
                            <div class="with_icon">
                                <dt>Hit Points</dt>
                                <dd>
                                    <span contenteditable="true" class="small" data-name="hp_cur" placeholder="0" aria-label="Current Hit Points"></span> <strong>/</strong>
                                    <span contenteditable="true" class="small" data-name="hp_max" placeholder="0" aria-label="Maximum Hit Points"></span>
                                </dd>
                            </div>
                            <div>
                                <dt>Death Save Success/Fail</dt>
                                <dd>
                                    <input type="number" class="small" name="death_success" data-name="deathSave" data-subfield="success" value="0" min="0" max="3" aria-label="Death Save Successes" />
                                    <strong>/</strong>
                                    <input type="number" class="small" name="death_fail" data-name="deathSave" data-subfield="fail" value="0" min="0" max="3" aria-label="Death Save Fails" />
                                </dd>
                            </div>
                        </dl>
                    </section>

                    <section>
                        <h2 id="page-attributes">Attributes</h2>
                        <ul class="pc-attributes">
                            <li>
                                <label for="str">Str</label>
                                <input type="number" id="str" class="pc-str pc-attribute" data-name="str" value=10 min=3 max=25 />
                                <span class="pc-attribute-mod" id="pc-str-mod">0</span>
                                <label>
                                    <input type="checkbox" name="pc-str-save" data-name="saves" data-subfield="str" value=1 />
                                    Save
                                </label>
                                <span class="pc-save-mod small" contenteditable="true">0</span>
                            </li>
                            <li>
                                <label for="dex">Dex</label>
                                <input type="number" id="dex" class="pc-dex pc-attribute" data-name="dex" value=10 min=3 max=25 />
                                <span class="pc-attribute-mod" id="pc-dex-mod">0</span>
                                <label>
                                    <input type="checkbox" name="pc-dex-save" data-name="saves" data-subfield="dex" value=1 />
                                    Save
                                </label>
                                <span class="pc-save-mod small" contenteditable="true">0</span>
                            </li>
                            <li>
                                <label for="con">Con</label>
                                <input type="number" id="con" class="pc-con pc-attribute" data-name="con" value=10 min=3 max=25 />
                                <span class="pc-attribute-mod" id="pc-con-mod">0</span>
                                <label>
                                    <input type="checkbox" name="pc-con-save" data-name="saves" data-subfield="con" value=1 />
                                    Save
                                </label>
                                <span class="pc-save-mod small" contenteditable="true">0</span>
                            </li>
                            <li>
                                <label for="intel">Int</label>
                                <input type="number" id="intel" class="pc-int pc-attribute" data-name="intel" value=10 min=3 max=25 />
                                <span class="pc-attribute-mod" id="pc-intel-mod">0</span>
                                <label>
                                    <input type="checkbox" name="pc-intel-save" data-name="saves" data-subfield="intel" value=1 />
                                    Save
                                </label>
                                <span class="pc-save-mod small" contenteditable="true">0</span>
                            </li>
                            <li>
                                <label for="wis">Wis</label>
                                <input type="number" id="wis" class="pc-wis pc-attribute" data-name="wis" value=10 min=3 max=25 />
                                <span class="pc-attribute-mod" id="pc-wis-mod">0</span>
                                <label>
                                    <input type="checkbox" name="pc-wis-save" data-name="saves" data-subfield="wis" value=1 />
                                    Save
                                </label>
                                <span class="pc-save-mod small" contenteditable="true">0</span>
                            </li>
                            <li>
                                <label for="cha">Cha</label>
                                <input type="number" id="cha" class="pc-cha pc-attribute" data-name="cha" value=10 min=3 max=25 />
                                <span class="pc-attribute-mod" id="pc-cha-mod">0</span>
                                <label>
                                    <input type="checkbox" name="pc-cha-save" data-name="saves" data-subfield="cha" value=1 />
                                    Save
                                </label>
                                <span class="pc-save-mod small" contenteditable="true">0</span>
                            </li>
                        </ul>

                        <h2 id="page-skills">Skills</h2>
                        <ul class="pc-skills">
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="acrobatics" data-attr="dex" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="acrobatics" aria-label="Skill Expertise" />
                                    Acrobatics (Dex)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="animal_handling" data-attr="wis" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="animal_handling" aria-label="Skill Expertise" />
                                    Animal Handling (Wis)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="arcana" data-attr="intel" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="arcana" aria-label="Skill Expertise" />
                                    Arcana (Int)
                                </label>
                                <span class="pc-skill-mod">0</span>
                                </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="athletics" data-attr="str"  />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="athletics" aria-label="Skill Expertise" />
                                    Athletics (Str)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="deception" data-attr="cha" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="deception" aria-label="Skill Expertise" />
                                    Deception (Cha)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="history" data-attr="intel" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="history" aria-label="Skill Expertise" />
                                    History (Int)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="insight" data-attr="wis" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="insight" aria-label="Skill Expertise" />
                                    Insight (Wis)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="intimidation" data-attr="cha" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="intimidation" aria-label="Skill Expertise" />
                                    Intimidation (Cha)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="investigation" data-attr="intel" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="investigation" aria-label="Skill Expertise" />
                                    Investigation (Int)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="medicine" data-attr="wis" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="medicine" aria-label="Skill Expertise" />
                                    Medicine (Wis)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="nature" data-attr="intel" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="nature" aria-label="Skill Expertise" />
                                    Nature (Int)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="perception" data-attr="wis" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="perception" aria-label="Skill Expertise" />
                                    Perception (Wis)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="performance" data-attr="cha" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="performance" aria-label="Skill Expertise" />
                                    Performance (Cha)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="persuasion" data-attr="cha" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="persuasion" aria-label="Skill Expertise" />
                                    Persuasion (Cha)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="religion" data-attr="intel" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="religion" aria-label="Skill Expertise" />
                                    Religion (Int)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="sleight_of_hand" data-attr="dex" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="sleight_of_hand" aria-label="Skill Expertise" />
                                    Sleight of Hand (Dex)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="stealth" data-attr="dex" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="stealth" aria-label="Skill Expertise" />
                                    Stealth (Dex)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" value=1 data-name="skills" data-subfield="survival" data-attr="wis" />
                                    <input type="checkbox" value=1 data-name="expert" data-subfield="survival" aria-label="Skill Expertise" />
                                    Survival (Wis)
                                </label>
                                <span class="pc-skill-mod">0</span>
                            </li>
                        </ul>
                    </section>

                    <section class="grid-span-col-2">
                        <h2>Weapons & Attacks</h2>
                        <table class="table-editable" data-name="weapons">
                            <thead>
                                <th>Weapon</th><th>Att.</th><th>Damage</th><th>Notes</th>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>

                        <h2>Features & Traits</h2>
                        <ul class="list-vertical" data-name="features"></ul>

                        <h2>Other Proficiencies</h2>
                        <div contenteditable="true" class="largearea" data-name="proficiencies_other"></div>

                        <h2>Equipment</h2>
                        <ul class="list-vertical" data-name="equipment"></ul>

                        <dl class="field">
                            <div>
                                <dt>CP</dt><dd contenteditable="true" class="small" data-name="cp" placeholder="0"></dd>
                                <dt>SP</dt><dd contenteditable="true" class="small" data-name="sp" placeholder="0"></dd>
                            </div>
                            <div>
                                <dt>GP</dt><dd contenteditable="true" class="small" data-name="gp" placeholder="0"></dd>
                                <dt>PP</dt><dd contenteditable="true" class="small" data-name="pp" placeholder="0"></dd>
                            </div>
                        </dl>
                    </section>

                    <section class="fullwidth">
                        <h2 id="page-spells">Spells</h2>

                        <dl class="field">
                            <div>
                                <dt>Spell Ability</dt><dd contenteditable="true" data-name="spell_ability"></dd>
                            </div>
                            <div>
                                <dt>Spell Save DC</dt><dd contenteditable="true" data-name="spell_save"></dd>
                            </div>
                            <div>
                                <dt>Spell Attack Bonus</dt><dd contenteditable="true" data-name="spell_attack"></dd>
                            </div>
                        </dl>

                    <h3>Spell Slots</h3>

                    <dl class="field">
                        <div>
                            <dt>1st</dt>
                            <dd>
                                <input type="number" class="small" data-name="spell_slots_cur" data-subfield="1" aria-label="Current spell slots: Level 1" min="0" />
                                <strong>/</strong>
                                <input type="number" class="small" data-name="spell_slots" data-subfield="1" aria-label="Max spell slots: Level 1" min="0" value="0" />
                            </dd>
                            <dt>2nd</dt>
                            <dd>
                                <input type="number" class="small" data-name="spell_slots_cur" data-subfield="2" aria-label="Current spell slots: Level 2" min="0" />
                                <strong>/</strong>
                                <input type="number" class="small" data-name="spell_slots" data-subfield="2" aria-label="Max spell slots: Level 2" min="0" value="0" />
                            </dd>
                        </div>
                        <div>
                            <dt>3rd</dt>
                            <dd>
                                <input type="number" class="small" data-name="spell_slots_cur" data-subfield="3" aria-label="Current spell slots: Level 3" min="0" />
                                <strong>/</strong>
                                <input type="number" class="small" data-name="spell_slots" data-subfield="3" aria-label="Max spell slots: Level 3" min="0" value="0" />
                            </dd>
                            <dt>4th</dt>
                            <dd>
                                <input type="number" class="small" data-name="spell_slots_cur" data-subfield="4" aria-label="Current spell slots: Level 4" min="0" />
                                <strong>/</strong>
                                <input type="number" class="small" data-name="spell_slots" data-subfield="4" aria-label="Max spell slots: Level 4" min="0" value="0" />
                            </dd>
                        </div>
                        <div>
                            <dt>5th</dt>
                            <dd>
                                <input type="number" class="small" data-name="spell_slots_cur" data-subfield="5" aria-label="Current spell slots: Level 5" min="0" />
                                <strong>/</strong>
                                <input type="number" class="small" data-name="spell_slots" data-subfield="5" aria-label="Max spell slots: Level 5" min="0" value="0" />
                            </dd>
                            <dt>6th</dt>
                            <dd>
                                <input type="number" class="small" data-name="spell_slots_cur" data-subfield="6" aria-label="Current spell slots: Level 6" min="0" />
                                <strong>/</strong>
                                <input type="number" class="small" data-name="spell_slots" data-subfield="6" aria-label="Max spell slots: Level 6" min="0" value="0" />
                            </dd>
                        </div>
                        <div>
                            <dt>7th</dt>
                            <dd>
                                <input type="number" class="small" data-name="spell_slots_cur" data-subfield="7" aria-label="Current spell slots: Level 7" min="0" />
                                <strong>/</strong>
                                <input type="number" class="small" data-name="spell_slots" data-subfield="7" aria-label="Max spell slots: Level 7" min="0" value="0" />
                            </dd>
                            <dt>8th</dt>
                            <dd>
                                <input type="number" class="small" data-name="spell_slots_cur" data-subfield="8" aria-label="Current spell slots: Level 8" min="0" />
                                <strong>/</strong>
                                <input type="number" class="small" data-name="spell_slots" data-subfield="8" aria-label="Max spell slots: Level 8" min="0" value="0" />
                            </dd>
                        </div>
                        <div>
                            <dt>9th</dt>
                            <dd>
                                <input type="number" class="small" data-name="spell_slots_cur" data-subfield="9" aria-label="Current spell slots: Level 9" min="0" />
                                <strong>/</strong>
                                <input type="number" class="small" data-name="spell_slots" data-subfield="9" aria-label="Max spell slots: Level 9" min="0" value="0" />
                            </dd>
                        </div>
                    </dl>
                </section>

                    <section>
                        <h3>Cantrips</h3>
                        <ul class="list-vertical" data-name="spells" data-subfield="0"></ul>
                    </section>
                    <section hidden>
                        <h3>1st</h3>
                        <ul class="list-vertical" data-name="spells" data-subfield="1"></ul>
                    </section>
                    <section hidden>
                        <h3>2nd</h3>
                        <ul class="list-vertical" data-name="spells" data-subfield="2"></ul>
                    </section>
                    <section hidden>
                        <h3>3rd</h3>
                        <ul class="list-vertical" data-name="spells" data-subfield="3"></ul>
                    </section>
                    <section hidden>
                        <h3>4th</h3>
                        <ul class="list-vertical" data-name="spells" data-subfield="4"></ul>
                    </section>
                    <section hidden>
                        <h3>5th</h3>
                        <ul class="list-vertical" data-name="spells" data-subfield="5"></ul>
                    </section>
                    <section hidden>
                        <h3>6th</h3>
                        <ul class="list-vertical" data-name="spells" data-subfield="6"></ul>
                    </section>
                    <section hidden>
                        <h3>7th</h3>
                        <ul class="list-vertical" data-name="spells" data-subfield="7"></ul>
                    </section>
                    <section hidden>
                        <h3>8th</h3>
                        <ul class="list-vertical" data-name="spells" data-subfield="8"></ul>
                    </section>
                    <section hidden>
                        <h3>9th</h3>
                        <ul class="list-vertical" data-name="spells" data-subfield="9"></ul>
                    </section>
                </section>

                <section id="pane-notes" role="tabpanel" aria-labelledby="tab-notes" hidden class="grid">
                    <section>
                        <h2>NPCs</h2>
                        <dl class="list-vertical" data-name="npcs"></dl>
                    </section>
                    <section>
                        <h2>Factions</h2>
                        <dl class="list-vertical" data-name="factions"></dl>
                    </section>
                    <section>
                        <h2>Party Members</h2>
                        <dl class="list-vertical" data-name="partymembers"></dl>
                    </section>

                    <section>
                        <h2>Personality</h2>
                        <h3>Traits</h3>
                        <div contenteditable="true" class="smallarea" data-name="traits"></div>
                        <h3>Ideals</h3>
                        <div contenteditable="true" class="smallarea" data-name="ideals"></div>
                        <h3>Bonds</h3>
                        <div contenteditable="true" class="smallarea" data-name="bonds"></div>
                        <h3>Flaws</h3>
                        <div contenteditable="true" class="smallarea" data-name="flaws"></div>
                        <h3>Appearance</h3>
                        <div contenteditable="true" class="smallarea" data-name="appearance"></div>
                        <h2>Languages</h2>
                        <div contenteditable="true" class="smallarea" data-name="languages"></div>
                    </section>

                    <section>
                        <h2 id="page-notes_adv">Adventure Notes</h2>
                        <dl class="list-vertical" data-name="notes_adv"></dl>
                    </section>
                    <section>
                        <h2>Campaign Notes</h2>
                        <dl class="list-vertical" data-name="notes_cam"></dl>
                    </section>

                    <section>
                        <h2>Character Notes</h2>
                        <div contenteditable="true" class="largearea" data-name="notes"></div>
                    </section>
                </section>
            </main>
            <footer>
                <h4>Character Sheet. 5e.</h4>
                <ul>
                    <li><button type="button" class="btn-plain btn-help btn-dialog">Help</button></li>
                    <li>Created by <a href="http://madinkbeard.com">Derik A Badman</a></li>
                    <li><a href="https://github.com/derikb/character-sheet-5e">Github</a></li>
                </ul>
            </footer>
            <nav>
                <ol>
                    <li><a href="#page-top">Top</a></li>
                    <li><a data-tab="pane-stats" href="#page-attributes">Attributes</a></li>
                    <li><a data-tab="pane-stats" href="#page-skills">Skills</a></li>
                    <li><a data-tab="pane-stats" href="#page-spells">Spells</a></li>
                    <li><a data-tab="pane-notes" href="#page-notes_adv">Notes</a></li>
                </ol>
            </nav>
        </div>

        <script type="module">
            import { default as ActionMenu } from './src/ActionMenu.js';
            import { default as EventEmitter } from './src/EventEmitter.js';
            import { default as Manager } from './src/Manager.js';
            import { default as ui } from './src/UI5e.js';

            import { default as SkillView } from './src/SkillView.js';


            const el = document.querySelector('.pc-skills');
            window.skillView = new SkillView({
                el: el,
                events: [
                    { event: 'click', selector: 'input[data-name=expert]', method: 'log' },
                    { event: 'click', selector: 'input[data-name=skills]', method: 'flarf' }
                ]
            });

            /**
            * Register service worker if it's supported
            */
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('service_worker.js', {
                    scope: '/'
                });
            }

            const emitter = new EventEmitter();
            ActionMenu.initialize(emitter);

            Manager.initialize({
                emitter: emitter,
                ui: ui,
                prefix: 'charsheet-5e-',
                appname: 'character-sheet-5e'
            });
        </script>
        <script nomodule>
            alert('Sorry, you must use a modern browser for this to code to work.');
        </script>

        <template id="introAlert">
            <h2 id="dialog-label" tabindex="-1">Character Sheet. 5e.</h2>
            <p>An online character sheet for 5th edition D&amp;D, usable offline (in some browsers).</p>
            <p>Designed for modern browsers, if all else fails Chrome is your best bet and IE is your worst bet.</p>
            <p><strong>Warning:</strong> Character data is saved to your browser's local storage. This means it can be erased if you delete browser data and will not automatically transfer between browsers even on the same computer. Please Save and Backup often (or at least at the end of every gaming session)!</p>
            <p>This message will only appear until you save your first character.</p>
        </template>
        <template id="defListItem">
            <div class="defListPair">
                <dt contenteditable="true"></dt>
                <dd contenteditable="true"></dd>
            </div>
        </template>
        <template id="helpDialog">
            <h1 id="dialog-label" tabindex="-1">Help</h1>

            <h2>Most importantly</h2>
            <ul>
                <li>This app only saves data to your browsers' local storage. If your browser's data is deleted, your saved characters will be deleted. Use the backup options to save character data when you make changes.</li>
                <li>This app is designed for modern web browsers, it has been tested in Chrome (desktop and mobile), Firefox (desktop), and Safari (desktop and mobile). It is possible this will work in IE Edge too, I haven't tested it (if you try it send me any bugs).</li>
                <li>After you've loaded the app, it will work offline in Chrome, Firefox, and Safari (desktop) as well as Safari (iOS) and Chrome (Android). Chrome (iOS) does not seem to work offline, and I haven't tried any other browsers.</li>
            </ul>

            <h2>Actions</h2>

            <ul>
                <li><strong>Save</strong> This will save the current character to local storage. If the character already exists it will update.</li>
                <li><strong>Load</strong> This will show you a list of saved characters (if you have any). Clicking on a character's name will load that character. Note: You will lose any unsaved data if you load a character without saving the one currently displayed.</li>
                <li><strong>New Character</strong> This will load up a new/blank character sheet. Note: You will lose any unsaved data if you create a new character without saving the one currently displayed.</li>
                <li><strong>File Backup</strong> This will create data in the JSON format that can be loaded into this app in another browser/device. It will either:
                    <ul>
                        <li>Generate a download file with the currently viewed character's backup data.</li>
                        <li>Pop up the currently viewed character's backup data so it can be copied and pasted somewhere else.</li>
                    </ul>
                </li>
                <li><strong>Email Backup</strong> This will open your default email client and start a new message containing the currently viewed character's backup data as well as instructions on how to use that data.</li>
                <li><strong>Restore Backup</strong> This opens a form for uploading a file or pasting in character backup data to save that character in the current browser. If the character already exists they will be updated to match the restored data (so be careful).</li>
            </ul>

            <h2>Character Sheet</h2>

            <ul>
                <li>Click on data or empty areas to edit. Data is NOT automatically saved; you must hit the <strong>Save</strong> button (or use the keyboard shortcut).</li>
                <li>Ability, saving throw, and skill modifiers are all automatically calculated when the proficiency, ability, save, or skill fields are changed.</li>
                <li>All other fields are manually changed.</li>
                <li>Spell lists only appear if the corresponding spell slot is greater than 0.</li>
                <li>Press <em>enter</em> while editing any list field to add another empty field to the list. (Use <em>Shift+Enter</em> to add a new line.)</li>
            </ul>

            <h2>Keyboard Shortcuts</h2>
            <table>
                <thead><tr><th>Keys</th><th>Action</th></tr></thead>
                <tbody>
                    <tr><td><em>Ctrl+Shift+ArrowDown</em></td><td>Save current character</td></tr>
                    <tr><td><em>Ctrl+Shift+ArrowLeft</em></td><td>Switch Tabs</td></tr>
                    <tr><td><em>Ctrl+Shift+ArrowUp</em></td><td>Toggle Load Character menu (and focus on it).</td></tr>
                    <tr><td><em>Esc</em></td><td>Close modals/dialogs.</td></tr>
                    <tr><td><em>ArrowRight, ArrowLeft</em></td><td>Navigate the action toolbar at the top.</td></tr>
                </tbody>
            </table>
        </template>

        <template id="backupModal">
            <h2 id="dialog-label-backup" tabindex="-1">Backup Characters</h2>
            <form id="form_backup_download" target="_self">
                <fieldset>
                    <legend tabindex="-1">Pick characters to download.</legend>
                    <ul class="character_downloads"></ul>
                </fieldset>
                <fieldset>
                    <legend>Pick a format</legend>
                    <ul>
                    <li><label><input type="radio" name="format" value="file" checked> File download</label></li>
                    <li><label><input type="radio" name="format" value="email"> Email data</label></li>
                </fieldset>
                <button type="submit">Download</button>
                <button type="button" class="close">Cancel</button>
            </form>
        </template>

        <template id="restoreModal">
            <h2 id="dialog-label-restore" tabindex="-1">Restore Characters</h2>
            <form id="form_backup_restore" target="_self">
                <label for="files">Restore from file</label>
                <input type="file" id="files" name="files" />
                <p>or</p>
                <label for="backup_data">Paste the character backup data</label>
                <textarea id="backup_data" name="backup_data"></textarea>
                <button type="submit">Restore</button>
                <button type="button" class="close">Cancel</button>
            </form>
        </template>

        <template id="deleteModal">
            <h2 id="dialog-label-delete" tabindex="-1">Delete Characters</h2>
            <ul id="delete_list">
            </ul>
        </template>

        <template id="loadModal">
            <h2 id="dialog-label-load" tabindex="-1">Load Character</h2>
            <ul id="character_list">
            </ul>
        </template>
    </body>
</html>
